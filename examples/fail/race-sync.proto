# We declare exactly one shared location, named x
shared x;
const local tid,
     global ub;
# distinct [tid];

foreach (idx in 0 .. ub) {
  rw x[idx + 1];
  sync;
  rw x[idx];
}
