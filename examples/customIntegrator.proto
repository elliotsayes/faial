(begin
  (loop (range idx 999)
    (loc sumBuffer (ro (* idx $tid) true)))
  (loc tempBuffer (rw $tid true))
  (loop (range i 999)
    (begin
      sync
      (loc tempBuffer (rw $tid (= (mod $tid (* i 2)) 0)))
    )
  )
  (loc tempBuffer (ro 0 (= idx $tid)))
  (loc result (rw 0 (= idx $tid)))
)
