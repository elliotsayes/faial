
shared x;

const local tid, global t where
  distinct [tid] && t > 0;

rw x[tid];
foreach (x in 0 .. t) {
    sync;
}
# This never races because the loop runs at least once
rw x[tid + 1];
