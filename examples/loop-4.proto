
shared x;

const local tid, global t where distinct [tid] ;

rw x[tid];
foreach (x in 0 .. t) {
    sync;
}
# This only races when t = 0
rw x[tid + t];