(begin
  (loc x (rw (set tid 1 true)))
  sync
  (loc x (rw (set (+ idx 1) 1000 (= tid 0) ) ) )
  (loc x (rw (set tid 1 (= tid 0))))
  (loc x (ro (set idx tid true)))
)
