(begin
  (loc x (rw tid 1 true))
  sync
  (loc x (rw (+ idx 1) 1000 (= tid 0) ) )
  (loc x (rw tid 1 (= tid 0)))
  (loc x (ro idx tid true))
)
